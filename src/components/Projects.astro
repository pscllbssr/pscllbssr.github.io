---
import { Icon } from 'astro-icon/components';

const projects = [
  {
    title: 'Der toxische Sog der Manosphere',
    year: 2025,
    url: 'https://www.srf.ch/news/schweiz/radikalisierung-auf-tiktok-der-toxische-sog-der-manosphere',
    description: 'Unsere Recherche zeigt am Beispiel von TikTok, wie schnell junge Männer in die Manosphere abrutschen. Dafür haben wir Handys automatisiert und rund 120\'000 Videos analysiert.',
    collaborators: 'Mit Julian Schmidli und Keto Schumacher',
    tasks: 'Scraping, Datenanalyse, Visualisierung & Frontend',
    award: null
  },
  {
    title: 'Der Spion in unseren Handys',
    year: 2024,
    url: 'https://www.srf.ch/news/schweiz/tracking-mit-ortungsdiensten-der-spion-in-unseren-handys',
    description: 'Anhand eines Daten-Samples konnten wir zeigen, was angeblich anonyme Standortdaten aus dem Online-Werbesystem über uns und kritische Schweizer Infrastruktur preisgeben.',
    collaborators: 'Mit Julian Schmidli und Keto Schumacher',
    tasks: 'Datenanalyse, Visualisierung & Frontend',
    award: "Shortlist Deutscher Reporter:innen Preis (Datenjournalismus + Multimedia)"
  },
  {
    title: 'Am Puls des Planeten – Klimamonitor',
    year: 2023,
    url: 'https://www.srf.ch/news/schweiz/klimamonitor-am-puls-des-planeten-taegliche-zahlen-und-fakten-zum-klima',
    description: 'Die wichtigsten Zahlen und Fakten zum Klima, täglich aktualisiert und bezogen auf den eigenen Wohnort.',
    collaborators: 'Mit Julian Schmidli und Lukas Frischknecht',
    tasks: 'Data Engineering, Automatisierung, Visualisierung & Frontend',
    award: 'Swiss Press Award (Online)'
  }
];
---

<section class="projects border-top">
  <div class="container">
    <h2>
      <Icon name="mdi:monitor-dashboard" width="28" height="28" />
      Interaktive Datengeschichten
    </h2>
    <p class="section-description">
    Eine Auswahl meiner datenjournalistischen Arbeiten bei SRF Data.
    </p>
    <div class="project-list">
      {projects.map((project) => (
        <article class="project-item">
          <h3>
            <a href={project.url} target="_blank" rel="noopener noreferrer">
              {project.title}
            </a>
            <span class="year">({project.year})</span>
          </h3>
          {project.award && (
            <div class="award">
              <strong>★ {project.award}</strong>
            </div>
          )}
          <p class="description">{project.description}</p>
          <p class="collaborators text-gray text-sm">{project.collaborators}</p>
          <div class="tasks text-sm">
            <strong>Verantwortlich für:</strong>
            {project.tasks.split(',').map(task => (
              <span class="task-tag">{task.trim()}</span>
            ))}
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .projects {
    background: var(--color-bg-alt);
  }

  .project-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .project-item {
    padding: var(--spacing-sm) var(--spacing-sm);
    margin-left: calc(-1 * var(--spacing-sm));
    margin-right: calc(-1 * var(--spacing-sm));
    border-radius: 8px;
    background: var(--color-bg);
    border: 1px solid var(--color-light-gray);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  }

  .project-item h3 {
    margin-bottom: var(--spacing-xs);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--spacing-sm);
  }

  .project-item h3 a {
    border-bottom: none;
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 2px;
    flex: 1;
    min-width: 0;
  }

  .year {
    font-weight: 400;
    font-size: 1rem;
    color: var(--color-gray);
    flex-shrink: 0;
  }

  .award {
    margin-bottom: var(--spacing-sm);
    color: var(--color-accent);
    font-size: 0.9rem;
  }

  .description {
    margin-bottom: var(--spacing-sm);
    line-height: 1.7;
  }

  .collaborators {
    margin-bottom: var(--spacing-xs);
    font-style: italic;
  }

  .tasks {
    margin-bottom: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
  }

  .tasks strong {
    margin-right: 0.25rem;
  }

  .task-tag {
    display: inline-block;
    padding: 0.15rem 0.5rem;
    background: var(--color-accent-bg);
    color: var(--color-accent);
    border-radius: 12px;
    font-size: 0.85rem;
    font-weight: 500;
  }

  @media (max-width: 768px) {
    .project-list {
      gap: var(--spacing-sm);
    }

    .project-item {
      margin-left: 0;
      margin-right: 0;
    }

    .project-item h3 {
      flex-wrap: wrap;
    }

    .year {
      font-size: 0.9rem;
    }
  }

  @media (min-width: 769px){
    .project-item{
      padding: var(--spacing-sm) var(--spacing-md);
      margin-left: calc(-1 * var(--spacing-md));
      margin-right: calc(-1 * var(--spacing-md));
    }
  }
</style>
