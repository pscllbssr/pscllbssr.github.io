---
import { Image } from 'astro:assets';
import profileImage from '../assets/images/pascal.jpg';
import { Icon } from 'astro-icon/components';
---

<section class="hero">
  <div class="container">
    <div class="header-row">
    <Image 
        src={profileImage} 
        alt="Pascal Albisser" 
        class="profile-photo"
        width={360}
        height={360}
        quality={85}
        format="webp"
      />
      <div class="header-text">
        <h1 class="name">Hallo, ich bin Pascal. <br/>Datenjournalist bei <a href="https://www.srf.ch/data" target="_blank">SRF</a> und <span class="nowrap">Full-Stack Data Developer</span>.</h1>
      </div>
    </div>
    <div class="content-section">
      <p class="description">
        Ich entwickle <span class="highlight">digitale Anwendungen</span>, die komplexe Datensätze und Zusammenhänge greifbar machen. Von unübersichtlichen Rohdaten über <span class="highlight">Datenanalyse</span>, <span class="highlight">Automatisierung</span> und <span class="highlight">KI</span> hin zu klaren <span class="highlight">Visualisierungen</span>, <span class="highlight">Dashboards</span> und <span class="highlight">interaktiven Geschichten</span>.
      </p>
      <div class="contact-section">
        <div class="contact-links">
          <a href="#" class="email-link" data-user="pscl.lbssr" data-domain="gmail.com">
            <Icon name="mdi:email" width="16" height="16" />
            E-Mail
          </a>
          <span class="separator">•</span>
          <a href="https://www.linkedin.com/in/pascal-albisser" target="_blank" rel="noopener noreferrer">
            <Icon name="mdi:linkedin" width="16" height="16" />
            LinkedIn
          </a>
          <span class="separator">•</span>
          <span class="threema-id">
            <Icon name="mdi:message-text" width="16" height="16" />
            Threema: <a href="https://threema.id/KCYR9NKH" target="_blank" rel="noopener noreferrer" class="threema-code">KCYR9NKH</a>
          </span>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .hero {
    background: var(--color-bg);
    padding: var(--spacing-xl) 0;
    min-height: 60vh;
    display: flex;
    align-items: center;
  }

  .header-row {
    gap: var(--spacing-lg);
    align-items: flex-start;
    margin-bottom: 0;
    display: flex;
    flex-direction: column;
  }

  .header-text {
    flex: 1;
  }

  .profile-photo {
    width: 180px;
    height: 180px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
  }

  .content-section {
    margin: var(--spacing-md) 0;
  }

  .intro-text {
    margin-bottom: var(--spacing-lg);
  }

  .name {
    font-size: 2.5rem;
    font-weight: 600;
    line-height: 1.2;
    margin-bottom: var(--spacing-xs);
    letter-spacing: -0.02em;
  }

  .nowrap {
    white-space: nowrap;
  }

  .title {
    font-size: 1.125rem;
    font-weight: 500;
    line-height: 1.5;
    margin-bottom: var(--spacing-xs);
    color: var(--color-text);
  }

  .degree {
    font-size: 0.9rem;
    line-height: 1.5;
    color: var(--color-gray);
    margin-bottom: var(--spacing-lg);
    font-weight: 400;
  }

  .greeting {
    font-size: 1.5rem;
    line-height: 1.6;
    margin-bottom: var(--spacing-xs);
  }

  .credentials {
    font-size: 1rem;
    line-height: 1.5;
    color: var(--color-gray);
    margin-bottom: var(--spacing-md);
  }

  .description {
    font-size: 1rem;
    line-height: 1.7;
    margin-bottom: 0;
  }

  .highlight {
    font-weight: 500;
    color: #d63031;
    background: rgba(214, 48, 49, 0.08);
    padding: 0.05rem 0.25rem;
    border-radius: 3px;
    transition: background 0.2s ease;
    white-space: nowrap;
  }

  .highlight:hover {
    background: rgba(214, 48, 49, 0.12);
  }

  @media (prefers-color-scheme: dark) {
    .highlight {
      color: #e67e7e;
      background: rgba(214, 48, 49, 0.12);
    }

    .highlight:hover {
      background: rgba(214, 48, 49, 0.18);
    }
  }

  .rotating-text {
    font-weight: 600;
    color: var(--color-accent);
    display: inline-block;
    min-width: 140px;
    text-align: left;
  }

  .contact-section {
    margin-top: var(--spacing-md);
  }

  .contact-section h3 {
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--spacing-xs);
    color: var(--color-gray);
    font-weight: 500;
  }

  .contact-links {
    display: flex;
    gap: var(--spacing-sm);
    align-items: center;
    font-size: 0.95rem;
  }

  .contact-links a {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
  }

  .contact-links a::after {
    content: none;
  }

  .threema-id {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    color: var(--color-text);
    font-size: 0.95rem;
  }

  .threema-code {
    font-family: monospace;
    position: relative;
    top: 0.5px;
  }

  .threema-code::after {
    content: none;
  }

  .separator {
    color: var(--color-gray);
  }

  @media (max-width: 768px) {
    .hero {
      min-height: 50vh;
      padding: var(--spacing-lg) 0;
    }

    .header-row {
      gap: var(--spacing-md);
    }

    .profile-photo {
      width: 120px;
      height: 120px;
    }

    .name {
      font-size: 2rem;
    }

    .title {
      font-size: 1.05rem;
    }

    .degree {
      font-size: 0.85rem;
    }

    .greeting {
      font-size: 1.25rem;
    }

    .credentials {
      font-size: 0.95rem;
    }

    .description {
      font-size: 1rem;
      max-width: 100%;
    }
  }

  @media (max-width: 480px) {
    .header-row {
      flex-direction: column;
      gap: var(--spacing-md);
      align-items: flex-start;
    }

    .header-text {
      order: 2;
      width: 100%;
      text-align: left;
    }

    .profile-photo {
      width: 100px;
      height: 100px;
      order: 1;
    }

    .name {
      font-size: 1.75rem;
    }

    .title {
      font-size: 1rem;
    }

    .degree {
      font-size: 0.8rem;
    }

    .greeting {
      font-size: 1.125rem;
    }

    .credentials {
      font-size: 0.875rem;
    }

    .description {
      font-size: 1rem;
      max-width: 100%;
    }
  }
</style>

<script>
  // Obfuscated email link
  const emailLink = document.querySelector('.email-link') as HTMLAnchorElement | null;
  if (emailLink) {
    const user = emailLink.getAttribute('data-user');
    const domain = emailLink.getAttribute('data-domain');
    emailLink.href = `mailto:${user}@${domain}`;
    emailLink.setAttribute('aria-label', `E-Mail an ${user}@${domain}`);
  }
</script>
