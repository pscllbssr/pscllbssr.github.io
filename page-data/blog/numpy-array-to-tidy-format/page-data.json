{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/numpy-array-to-tidy-format/","result":{"data":{"site":{"siteMetadata":{"name":"Pascal Albisser","title":"Pascal Albisser | Data Journalist","description":"Data Journalist at Swiss National Broadcaster, Student MSc Applied Information and Data Science.","about":"Welcome to my place on the web. Here I collect my latest work and write about things I have learnt or stumbled upon searching the web.","author":"@pscllbssr","github":"https://github.com/pscllbssr","linkedin":"https://www.linkedin.com/in/pascal-albisser"}},"markdownRemark":{"id":"9cd5b464-a611-56d8-b4bf-b7fa22cb5ebf","excerpt":"Lately I had a numpy-array containing a bunch of numbers from satellite imagery. \nFor further use I needed to bring this into a tidy format, meaning one recordâ€¦","html":"<p>Lately I had a numpy-array containing a bunch of numbers from satellite imagery.\nFor further use I needed to bring this into a tidy format, meaning one record per row.\nThe following code solved my problem.  </p>\n<p>First of all I create a bunch of numbers for demonstration purpose.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\ndata <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>uniform<span class=\"token punctuation\">(</span>low<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> high<span class=\"token operator\">=</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then I used <code class=\"language-text\">np.ndenumerate()</code> and pandas to bring the numbers into a dataframe. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\n<span class=\"token comment\"># create dataframe</span>\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>ndenumerate<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"coordinates\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># unpack coordinates tuple into single columns</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"y\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"x\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">\"coordinates\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># get rid of coordinates column</span>\ndf<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token string\">'coordinates'</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">df</code> now consists of three columns containing the numbers and coordinates. I looks something like this:  </p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token table\"><span class=\"token table-header-row\"><span class=\"token punctuation\">|</span><span class=\"token table-header important\">     </span><span class=\"token punctuation\">|</span><span class=\"token table-header important\">     value </span><span class=\"token punctuation\">|</span><span class=\"token table-header important\">   y </span><span class=\"token punctuation\">|</span><span class=\"token table-header important\">   x </span><span class=\"token punctuation\">|</span>\n</span><span class=\"token table-line\"><span class=\"token punctuation\">|</span><span class=\"token punctuation\">-----</span><span class=\"token punctuation\">|</span><span class=\"token punctuation\">-----------</span><span class=\"token punctuation\">|</span><span class=\"token punctuation\">-----</span><span class=\"token punctuation\">|</span><span class=\"token punctuation\">-----</span><span class=\"token punctuation\">|</span>\n</span><span class=\"token table-data-rows\"><span class=\"token punctuation\">|</span><span class=\"token table-data\">   0 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">  0.788830 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   0 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   0 </span><span class=\"token punctuation\">|</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-data\">   1 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">  0.413680 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   0 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   1 </span><span class=\"token punctuation\">|</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-data\"> ... </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">       ... </span><span class=\"token punctuation\">|</span><span class=\"token table-data\"> ... </span><span class=\"token punctuation\">|</span><span class=\"token table-data\"> ... </span><span class=\"token punctuation\">|</span>\n<span class=\"token punctuation\">|</span><span class=\"token table-data\">  99 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\"> -0.361956 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   9 </span><span class=\"token punctuation\">|</span><span class=\"token table-data\">   9 </span><span class=\"token punctuation\">|</span></span></span></code></pre></div>","frontmatter":{"title":"Numpy Array to tidy format","date":"November 24, 2022","description":"Short code snippet to bring 2D-array into tidy table format."}}},"pageContext":{"slug":"/blog/numpy-array-to-tidy-format/","previous":{"fields":{"slug":"/blog/my-first-blog/"},"frontmatter":{"title":"My First Blog Post"}},"next":null}},"staticQueryHashes":["63159454"]}